# å‰è¨€
----------------------------------------
è‡ªä»å¾—äº†ç²¾ç¥ç—…ï¼Œæ•´ä¸ªäººç²¾ç¥å¤šäº†ï¼

----------------------------------------

# æ—¥ç¨‹
----------------------------------------
ä»Šå¤©ä¹Ÿæ—©èµ·äº†ï¼Œç¾ä¸­ä¸è¶³çš„æ˜¯æ˜¨å¤©æ²¡æ€ä¹ˆç¡ã€‚
æœ¬æ¥å¾ˆæ°”å¾ˆæš´èºçš„ï¼Œå­¦äº†ä¸€ä¼šé‡Šæ€€äº†ï¼Œåæ­£è¿™ç§çŠ¶æ€ä¹Ÿä¸æ˜¯ä¸èƒ½å­¦ï¼Œå¤šæ¥å‡ å¤©å°±ä¹ æƒ¯äº†ã€‚
--------7.2--------
å·æ‡’äº†ï¼Œè¿™ä¸¤å¤©å‡ ä¹å°±æ²¡å¹²ä»€ä¹ˆäº‹æƒ…

----------------------------------------

# å­¦ä¹ å†…å®¹
----------------------------------------
çœæµï¼š
1. rediså…¥é—¨
2. HttpClient
3. å¾®ä¿¡å°ç¨‹åº
4. ç¼“å­˜æœºåˆ¶

## 1. rediså…¥é—¨
åŸºäºå†…å­˜å‚¨å­˜çš„æ•°æ®åº“ [redis.net.cn](https://redis.net.cn)

### 0ï¼‰å®‰è£…
windowç‰ˆæœ¬ï¼š[Releases Â· microsoftarchive/redis](https://github.com/microsoftarchive/redis/releases) 

### 1ï¼‰å¯åŠ¨
cmdä¸­è¾“å…¥å‘½ä»¤ï¼Œå¯åŠ¨Redisçš„æœåŠ¡
```bash
redis-server.exe redis.windows.conf
```
è¿æ¥æœåŠ¡
```bash
redis-cli.exe -h localhost -p 6379
```
redisçš„è¿æ¥é»˜è®¤æ˜¯æ²¡æœ‰å¯†ç çš„ï¼Œéœ€è¦åœ¨redis.windows.confä¸­è¿›è¡Œé…ç½®
æŠŠ`# requirepass foobared` çš„æ³¨é‡Šå–æ¶ˆ
ç¤ºä¾‹
```bash
requirepass 123456
```
å› ä¸ºé…ç½®äº†å¯†ç ï¼Œæ‰€ä»¥å»ºç«‹è¿æ¥æ—¶ä¹Ÿè¦å¸¦ä¸Šç›¸åº”å‚æ•°
```bash
redis-cli.exe -h localhost -p 6379 -a 123456
```

### 2ï¼‰å¸¸ç”¨å‘½ä»¤
redisçš„å¸¸ç”¨å‘½ä»¤å¯¹åº”äº†å…¶ä½¿ç”¨çš„ä¸åŒæ•°æ®ç±»å‹

#### å­—ç¬¦ä¸²å‘½ä»¤

| å‘½ä»¤                  | æè¿°                                                         |
|-----------------------|--------------------------------------------------------------|
| SET key value         | è®¾ç½®æŒ‡å®škeyçš„å€¼                                              |
| GET key               | è·å–æŒ‡å®škeyçš„å€¼                                              |
| SETEX key seconds value | è®¾ç½®æŒ‡å®škeyçš„å€¼ï¼Œå¹¶å°†keyçš„è¿‡æœŸæ—¶é—´è®¾ä¸ºsecondsç§’               |
| SETNX key value       | åªæœ‰åœ¨keyä¸å­˜åœ¨æ—¶è®¾ç½®keyçš„å€¼                                 |

#### Redis hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡

| å‘½ä»¤                  | æè¿°                                                         |
|-----------------------|--------------------------------------------------------------|
| HSET key field value  | å°†å“ˆå¸Œè¡¨keyä¸­çš„å­—æ®µfieldçš„å€¼è®¾ä¸ºvalue                         |
| HGET key field        | è·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼                               |
| HDEL key field        | åˆ é™¤å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­çš„æŒ‡å®šå­—æ®µ                                 |
| HKEYS key             | è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å­—æ®µ                                         |
| HVALS key             | è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼                                           |

#### Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åº

| å‘½ä»¤                  | æè¿°                                                         |
|-----------------------|--------------------------------------------------------------|
| LPUSH key value1 [value2...] | å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨                               |
| LRANGE key start stop | è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´                                      |
| RPOP key              | ç§»é™¤å¹¶è·å–åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´                                    |
| LLEN key              | è·å–åˆ—è¡¨é•¿åº¦                                                 |

#### Redis set æ˜¯stringç±»å‹çš„æ— åºé›†åˆï¼Œé›†åˆæˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œé›†åˆä¸­ä¸èƒ½å‡ºç°é‡å¤çš„æ•°æ®

| å‘½ä»¤                  | æè¿°                                                         |
|-----------------------|--------------------------------------------------------------|
| SADD key member1 [member2...] | å‘é›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜                                   |
| SMEMBERS key         | è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜                                         |
| SCARD key             | è·å–é›†åˆçš„æˆå‘˜æ•°                                             |
| SINTER key1 [key2]   | è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†                                       |
| SUNION key1 [key2]    | è¿”å›æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†                                       |
| SREM key member1 [member2...] | åˆ é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜                                   |

#### Redisæœ‰åºé›†åˆæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆï¼Œä¸”ä¸å…è®¸æœ‰é‡å¤æˆå‘˜ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°

| å‘½ä»¤                  | æè¿°                                                         |
|-----------------------|--------------------------------------------------------------|
| ZADD key score1 member1 [score2 member2] | å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜                               |
| ZRANGE key start stop [WITHSCORES] | é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜                   |
| ZINCRBY key increment member | æœ‰åºé›†åˆä¸­å¯¹æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸ŠæŒ‡å®š increment                  |
| ZREM key member [member...] | ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜                               |

#### é€šç”¨å‘½ä»¤

| å‘½ä»¤                  | æè¿°                                                         |
|-----------------------|--------------------------------------------------------------|
| KEYS pattern          | æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼ï¼ˆpatternï¼‰çš„key                          |
| EXISTS key            | æ£€æŸ¥ç»™å®škeyæ˜¯å¦å­˜åœ¨                                           |
| TYPE key              | è¿”å›keyæ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹                                       |
| DEL key               | è¯¥å‘½ä»¤ç”¨äºåœ¨keyå­˜åœ¨æ˜¯åˆ é™¤key                                 |

### 3ï¼‰Spring Data Redis
springæä¾›çš„redis-javaæ¥å£

å¼•å…¥ä¾èµ–
```xml
<spring-redis>2.7.3</spring-redis>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
    <version>${spring-redis}</version>
</dependency>
```

é…ç½®application.yml
```yaml
redis:
    host: ${sky.redis.host}
    port: ${sky.redis.port}
    password: ${sky.redis.password}
    database: ${sky.redis.database}
```
æ³¨ï¼šredisé»˜è®¤æœ‰16ä¸ªéš”ç¦»çš„æ•°æ®åº“ï¼ˆdatabaseï¼‰

é…ç½®ç±»ï¼Œåˆ›å»ºRedisTemplateæ¨¡æ¿å¯¹è±¡
```java
@Configuration
@Slf4j
public class RedisConfiguration {
    @Bean
    public RedisTemplate redisTemplate(RedisConnectionFactory redisConnectionFactory){
        log.info("å¼€å§‹åˆ›å»ºRedisTemplateå¯¹è±¡...");
        RedisTemplate redisTemplate = new RedisTemplate();
        //è®¾ç½®keyçš„åºåˆ—åŒ–å™¨
        redisTemplate.setKeySerializer(new StringRedisSerializer());
        redisTemplate.setConnectionFactory(redisConnectionFactory);
        return redisTemplate;
    }
}
```

åœ¨ä¾èµ–æ³¨å…¥åï¼Œå¯ä»¥è·å–åˆ°å¯¹åº”çš„å‘½ä»¤æ–¹æ³•
```java
@Autowired
private RedisTemplate redisTemplate;

ValueOperations valueOperations = redisTemplate.opsForValue();
HashOperations hashOperations = redisTemplate.opsForHash();
SetOperations setOperations = redisTemplate.opsForSet();
ListOperations listOperations = redisTemplate.opsForList();
ZSetOperations zSetOperations = redisTemplate.opsForZSet();
```

ä¹‹åå°±å¯ä»¥é€šè¿‡å‘½ä»¤æ–¹æ³•æ¥æ‰§è¡Œå‘½ä»¤ï¼ˆæ ¼å¼ä¸Šä¸redisåŸç”Ÿå‘½ä»¤ç›¸ä¼¼ï¼‰
```java
valueOperations.set("value","1234",3, TimeUnit.MINUTES);
```

## 2. HttpClient 
å·¥å…·åŒ…ï¼ŒJavaç¨‹åºä½œä¸ºå®¢æˆ·ç«¯æ¥å‘é€Httpè¯·æ±‚

ä¾èµ–
```xml
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>4.5.13</version>
</dependency>
```

è¦ä½¿ç”¨HttpClientå‘é€è¯·æ±‚ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªHttpClientå¯¹è±¡
```java
CloseableHttpClient httpClient = HttpClients.createDefault();
```
æ³¨ï¼šCloseableHttpClientå¯ä»¥ä¸»åŠ¨æŠŠè¿æ¥æ± é‡Šæ”¾æ‰

æ¥ç€åˆ›å»ºä¸€ä¸ªè¯·æ±‚å¯¹è±¡
```java
HttpGet httpGet = new HttpGet("http://localhost:8080/user/shop/status");
```

å¦‚æœæ˜¯Postè¯·æ±‚ï¼ˆå¦‚Jsonè¯·æ±‚ä½“ï¼‰éœ€è¦è®¾ç½®è¯·æ±‚ä½“çš„æ ¼å¼
```java
HttpPost httpPost = new HttpPost("http://localhost:8080/admin/employee/login");

JSONObject jsonObject = new JSONObject();
jsonObject.put("username","admin");
jsonObject.put("password","123456");
//è®¾ç½®æ ¼å¼
StringEntity entity = new StringEntity(jsonObject.toString());
entity.setContentEncoding("utf-8");
entity.setContentType("application/json");

httpPost.setEntity(entity);
```

å‘é€è¯·æ±‚ï¼Œå¹¶é€šè¿‡è¯·æ±‚ä½“æ¥æ”¶
```java
CloseableHttpResponse response = httpClient.execute(httpPost);
```

è·å–è¿”å›çš„çŠ¶æ€ç 
```java
int statusCode = response.getStatusLine().getStatusCode();
log.info(String.valueOf(statusCode));
```

è·å–ç›¸åº”ä½“
```java
HttpEntity entity = response.getEntity();
String body = EntityUtils.toString(entity);
log.info(body);
```

å…³é—­èµ„æº
```java
response.close();
httpClient.close();
```

## 3. å¾®ä¿¡å°ç¨‹åº
### 0ï¼‰å‡†å¤‡å·¥ä½œ
æ³¨å†Œ[å°ç¨‹åº](https://mp.weixin.qq.com/wxopen/waregister?action=step1&source=mpregister&token=&lang=zh_CN) 

å¼€å‘æ–‡æ¡£[å¾®ä¿¡å¼€æ”¾æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/) 

è·å–å¼€å‘å·¥å…·[å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸‹è½½åœ°å€ä¸æ›´æ–°æ—¥å¿— | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html) 

### 1ï¼‰é¡¹ç›®ç»“æ„
å¾®ä¿¡å°ç¨‹åºæ˜¯éå¸¸ç»å…¸çš„å‰ç«¯é¡¹ç›®

å°ç¨‹åºä¸»ä½“ç”±ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒæ–‡ä»¶ç»„æˆï¼Œæ”¾ç½®åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼š

| æ–‡ä»¶       | å¿…éœ€ | ä½œç”¨               |
|------------|------|--------------------|
| `app.js`   | æ˜¯   | å°ç¨‹åºé€»è¾‘å…¥å£     |
| `app.json` | æ˜¯   | å…¨å±€é…ç½®ï¼ˆé¡µé¢è·¯ç”±ã€çª—å£æ ·å¼ç­‰ï¼‰ |
| `app.wxss` | å¦   | å…¨å±€æ ·å¼è¡¨         |

æ¯ä¸ªå°ç¨‹åºé¡µé¢ç”±å››ä¸ªæ–‡ä»¶ç»„æˆï¼Œå­˜æ”¾åœ¨ `pages/é¡µé¢å/` ç›®å½•ä¸‹ï¼š

| æ–‡ä»¶ç±»å‹   | å¿…éœ€ | ä½œç”¨               |
|------------|------|--------------------|
| `.js`      | æ˜¯   | é¡µé¢é€»è¾‘ï¼ˆæ•°æ®ã€äº‹ä»¶å¤„ç†ï¼‰ |
| `.wxml`    | æ˜¯   | é¡µé¢ç»“æ„ï¼ˆç±»ä¼¼HTMLï¼‰     |
| `.json`    | å¦   | é¡µé¢å•ç‹¬é…ç½®ï¼ˆè¦†ç›–å…¨å±€ï¼‰   |
| `.wxss`    | å¦   | é¡µé¢æ ·å¼è¡¨ï¼ˆè¦†ç›–å…¨å±€ï¼‰     |

### 2ï¼‰å…¥é—¨ç¨‹åº

#### åŠ¨æ€æ•°æ®
åœ¨index.jsä¸­å®šä¹‰æ•°æ®
```javascript
Page({
  data:{
    msg:'hello world',
  },
})
```
åœ¨index.wxmlä¸­å®šä¹‰`{{}}`å³å¯
```html
<view class="container">
    <view>
      {{msg}}
    </view>
</view>
```

å¯¹åº”å‡½æ•°æ¥è¯´ï¼Œä¹Ÿæ˜¯ç±»ä¼¼çš„,å…¶ä¸­`wx.xxx`éƒ½æ˜¯å¾®ä¿¡å†…ç½®çš„å‡½æ•°ï¼Œå‚æ•°ç±»ä¼¼äºé”®å€¼å¯¹çš„æ ¼å¼
```javascript
Page({
  data:{
    msg:'hello world',
    nickname:'',
    url:'',
    code:'',
  },
  //è·å–ç”¨æˆ·ä¿¡æ¯
  getUserInfo(){
    wx.getUserProfile({
      desc: 'è·å–ç”¨æˆ·ä¿¡æ¯',
      success: (res)=>{
        console.log(res.userInfo)
        this.setData({ //èµ‹å€¼æ•°æ®
          nickname:res.userInfo.nickName,
          url:res.userInfo.avatarUrl
        })
      }
    })
  },
  //å¾®ä¿¡ç™»é™†
  wxLogin(){
    wx.login({
      success:(res)=>{
        console.log(res.code)
        this.setData({
          code: res.code
        })
      }
    })
  },
})
```
ä½¿ç”¨`bind:tap`æ¥ç»‘å®šå‡½æ•°
```html
<view class="container">
    <view>
      <button type="primary" bind:tap="getUserInfo">è·å–ç”¨æˆ·ä¿¡æ¯</button>

      æ˜µç§°ï¼š{{nickname}}
      <img src="{{url}}"></img>
    </view>

    <view>
      <button bind:tap="wxLogin" type="warn">å¾®ä¿¡ç™»å½•</button>
    </view>
</view>
```

#### å‘é€å¼‚æ­¥è¯·æ±‚
```javascript
sendRequest(){
    wx.request({
        url: 'http://localhost:8080/user/shop/status',
        method:'GET',
        success:(res)=>{
        console.log(res.data)
        }
    })
},
```

### 3ï¼‰å¾®ä¿¡ç™»é™†
å¾®ä¿¡å®˜æ–¹è§„å®šäº†å¾®ä¿¡ç™»é™†ä½¿ç”¨çš„æ¥å£æ–‡æ¡£[å°ç¨‹åºç™»å½• | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/user-login/code2Session.html) 

ç®€å•åœ°è¯´ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°ç™»å½•è¯·æ±‚åéœ€è¦å‘å¾®ä¿¡æœåŠ¡å™¨å‘é€è¯·æ±‚æ¥è·å–ç”¨æˆ·æ ‡è¯†ï¼ˆopenidï¼‰ï¼Œå¹¶æŠŠç›¸å…³ä¿¡æ¯è¿”å›ç»™å°ç¨‹åºå‰ç«¯

åœ¨åç«¯ç¨‹åºä¸­ï¼š
åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œéœ€è¦æºå¸¦appidå’Œå¯†é’¥secretä¿¡æ¯
```yaml
wechat:
    appid: ${sky.wechat.appid}
    secret: ${sky.wechat.secret}
```

ä½¿ç”¨HttpClientæ¥å‘é€è¯·æ±‚
```java
Map<String,String> map = new HashMap<>();
map.put("appid",weChatProperties.getAppid());
map.put("secret",weChatProperties.getSecret());
map.put("js_code",userLoginDTO.getCode());
map.put("grant_type","authorization_code");

String json = HttpClientUtil.doGet(WX_LOGIN,map);
JSONObject jsonObject = JSON.parseObject(json);
String openid = jsonObject.getString("openid");
if(openid == null) throw new LoginFailedException(MessageConstant.LOGIN_FAILED);

//æ˜¯å¦ä¸ºæ–°ç”¨æˆ·
User user = userMapper.getByOpenid(openid);
if(user == null){
    user = User.builder()
            .openid(openid)
            .createTime(LocalDateTime.now())
            .build();
    userMapper.insert(user);
}

return user;
```

## 4. ç¼“å­˜æœºåˆ¶
é¢å¯¹ä¸€äº›é«˜é¢‘çš„æŸ¥è¯¢æ—¶ï¼Œé¢‘ç¹çš„è¯¢é—®æ•°æ®åº“ä¼šå¸¦æ¥å¤§é‡çš„å¼€é”€ï¼Œæ›´æ˜æ™ºçš„åšæ³•æ˜¯å°†é«˜é¢‘æ•°æ®æ”¾åœ¨å†…å­˜ä¸­ï¼Œç›´æ¥å¯ä»¥é€šè¿‡è®¿é—®å†…å­˜å¾—åˆ°ï¼ˆç±»ä¼¼äºcacheçš„ä½œç”¨ï¼‰

### æ ¸å¿ƒæ€è·¯
```mermaid
graph TD
    A(å¼€å§‹) -->|æŸ¥è¯¢èœå“| B(åç«¯æœåŠ¡)
    B --> C{ç¼“å­˜æ˜¯å¦å­˜åœ¨}
    C -->|Yes| D(è¯»å–ç¼“å­˜)
    C -->|No| E(æŸ¥è¯¢æ•°æ®åº“)
    E --> F(è½½å…¥ç¼“å­˜)
    F --> D
```

### 1ï¼‰åˆ©ç”¨redisç¼“å­˜
```java
//redisâ€”â€”key
String key = "dish_" + categoryId;

//æŸ¥è¯¢redisç¼“å­˜
List<DishVO> list = (List<DishVO>) redisTemplate.opsForValue().get(key);
if(list != null && list.size() > 0){
    return Result.success(list);
}

......

//ç¼“å­˜æ•°æ®
redisTemplate.opsForValue().set(key,list);
```

å¯¹äºèƒ½å¤Ÿå¾—åˆ°keyä¿¡æ¯çš„è¯·æ±‚ï¼Œæ¸…ç†å¯¹åº”ç¼“å­˜
```java
String key = "dish_" + dishDTO.getCategoryId();
redisTemplate.delete(key);
```

è€Œå¤šæ•°çš„è¯·æ±‚æ˜¯å¾—ä¸åˆ°keyä¿¡æ¯çš„è¯·æ±‚çš„ï¼Œä¾‹å¦‚åªæœ‰idå‚æ•°çš„æ‰¹é‡åˆ é™¤ï¼Œæ­¤æ—¶ç›´æ¥æŠŠæ‰€æœ‰çš„ç¼“å­˜éƒ½åˆ é™¤å³å¯ï¼Œå› ä¸ºè¯•å›¾å¾—åˆ°keyä¿¡æ¯çš„å¼€é”€å¯èƒ½æ›´å¤§ï¼Œè€Œä¸”ä¼šæ›´åŠ å¤æ‚
```java
cleanCache("dish_*");
private void cleanCache(String pattern){
    Set keys = redisTemplate.keys(pattern);
    redisTemplate.delete(keys);
}
```

### 2ï¼‰spring cache
åŸºäºæ³¨è§£çš„ç¼“å­˜åŠŸèƒ½ï¼ˆä¸­é—´ä»¶ä¼šæ ¹æ®ä¾èµ–æ™ºèƒ½é€‰æ‹©ï¼‰

ä¾èµ–
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-cache</artifactId>
    <version>${spring-cache}</version>
</dependency>
```

å¸¸ç”¨æ³¨è§£
| æ³¨è§£            | è¯´æ˜                                                                 |
|-----------------|----------------------------------------------------------------------|
| @EnableCaching   | å¼€å¯ç¼“å­˜æ³¨è§£åŠŸèƒ½ï¼Œé€šå¸¸åŠ åœ¨å¯åŠ¨ç±»ä¸Š                                    |
| @Cacheable      | åœ¨æ–¹æ³•æ‰§è¡Œå‰å…ˆæŸ¥è¯¢ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼›å¦‚æœæ²¡æœ‰ç¼“å­˜æ•°æ®ï¼Œè°ƒç”¨æ–¹æ³•å¹¶å°†æ–¹æ³•è¿”å›å€¼æ”¾åˆ°ç¼“å­˜ä¸­ |
| @CachePut       | å°†æ–¹æ³•çš„è¿”å›å€¼æ”¾åˆ°ç¼“å­˜ä¸­                                              |
| @CacheEvict     | å°†ä¸€æ¡æˆ–å¤šæ¡æ•°æ®ä»ç¼“å­˜ä¸­åˆ é™¤                                          |

æ³¨è§£çš„valueæ ¼å¼
```java
@Cacheable(cacheNames = "setmealCache",key = "#user.id")
```
æœ€ç»ˆæ‹¼æ¥çš„keyæ˜¯`${cacheNames}::${key}`

`#user.id`æ˜¯springçš„ä¸€ç§æ¨¡æ¿æ ¼å¼ï¼Œ`user`å¿…é¡»ä¸å‚æ•°çš„åç§°ä¸€è‡´
ä¹Ÿå¯ä»¥å†™æˆ`#p0.id`ï¼Œ`p0ï¼Œ1ï¼Œ2ï¼Œ3`ä»£è¡¨æ–¹æ³•ä¸­çš„ç¬¬`i`ä¸ªå‚æ•°

`CacheEvict`å¯ä»¥ç”¨`allEntries`æ¥è¡¨ç¤ºå…¨éƒ¨æ¸…é™¤
```java
@CacheEvict(cacheNames = "setmealCache",allEntries = true)
```

----------------------------------------

# ç»“è¯­
----------------------------------------
ä¸ƒæœˆä»½äº†ï¼Œå¿«æ”¾å‡äº†ï¼Œä¸èƒ½å¤ªæ‡’æ•£äº†ã€‚
èµ¶ç´§å›å®¶å§èˆå‹ğŸ˜­éƒ½æ”¾å‡äº†è¿˜æå­¦æ ¡é‡Œåšä»€ä¹ˆç‰¢å•Š

---------------------------------------
